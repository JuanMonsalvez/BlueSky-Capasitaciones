<?xml version="1.0" encoding="utf-8"?>
<configuration>
	<!-- ================================
       🔹 AppSettings
       ================================ -->
	<appSettings>
		<!-- Claves y variables globales -->
		<add key="GEMINI_API_KEY" value="AIzaSyDF8_m9qoIOeG8FJz1OdmlietoQT5qj-ZQ" />
		<add key="UPLOAD_PATH" value="~/Uploads/" />
	</appSettings>

	<!-- ================================
       🔹 Compilación y entorno
       ================================ -->
	<system.web>
		<compilation debug="true" targetFramework="4.7.2">
			<assemblies>
				<add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
			</assemblies>
		</compilation>

		<httpRuntime targetFramework="4.7.2" requestValidationMode="2.0" maxRequestLength="51200" executionTimeout="360" />

		<!-- Render moderno -->
		<pages controlRenderingCompatibilityVersion="4.0" clientIDMode="AutoID" />

		<!-- Manejo de sesiones -->
		<sessionState mode="InProc" timeout="20" />

		<!-- Sin autenticación hasta integrar backend -->
		<authentication mode="None" />

		<!-- Errores visibles en DEV -->
		<customErrors mode="Off" />
		<trace enabled="false" />
		<httpCookies httpOnlyCookies="true" requireSSL="false" />
	</system.web>

	<!-- ================================
       🔹 Configuración IIS / Static Content
       ================================ -->
	<system.webServer>
		<validation validateIntegratedModeConfiguration="false" />
		<modules runAllManagedModulesForAllRequests="true" />

		<defaultDocument>
			<files>
				<add value="Public/Default.aspx" />
			</files>
		</defaultDocument>

		<!-- Tipos MIME -->
		<staticContent>
			<remove fileExtension=".woff2" />
			<mimeMap fileExtension=".woff2" mimeType="font/woff2" />
			<remove fileExtension=".woff" />
			<mimeMap fileExtension=".woff" mimeType="font/woff" />
			<remove fileExtension=".ttf" />
			<mimeMap fileExtension=".ttf" mimeType="font/ttf" />
			<remove fileExtension=".svg" />
			<mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
		</staticContent>

		<!-- Handlers -->
		<handlers>
			<remove name="BlockViewHandler" />
			<add name="BlockViewHandler" path="*.cshtml;*.vbhtml" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
		</handlers>
	</system.webServer>

	<!-- ================================
       🔹 Conexión a base de datos (placeholder)
       ================================ -->
	<connectionStrings>
		<!-- Deja comentado hasta conectar EF6 / MySQL -->
		<!--
    <add name="BlueSkyContext"
         connectionString="Server=localhost;Database=bluesky;Uid=root;Pwd=;"
         providerName="MySql.Data.MySqlClient" />
    -->
	</connectionStrings>

	<!-- ================================
       🔹 Seguridad y cabeceras (opcional)
       ================================ -->
	<system.webServer>
		<httpProtocol>
			<customHeaders>
				<add name="X-Content-Type-Options" value="nosniff" />
				<add name="X-Frame-Options" value="SAMEORIGIN" />
				<add name="X-XSS-Protection" value="1; mode=block" />
			</customHeaders>
		</httpProtocol>
	</system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-1.6.5135.21930" newVersion="1.6.5135.21930" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Antlr3.Runtime" publicKeyToken="eb42632606e9261f" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.5.0.2" newVersion="3.5.0.2" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-13.0.0.0" newVersion="13.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration>
